"use strict";define(["EventManager","AppUtils"],function(a,b){return ng.core.Class({constructor:[ng.http.Http,ng.common.PlatformLocation,a,function(a,b,c){this._http=a,this._platformLocation=b,this._eventManager=c,this._initialized=!1}],getMameInfos:function(){var a=this,c=new ng.core.EventEmitter;return this._eventManager.emit("HTTP_BEGIN"),this._init().subscribe(function(){var d=b.getServiceUrl("mameinfos");a._http.get(d).subscribe(function(b){a._eventManager.emit("HTTP_END"),c.emit(b.json().data)})}),c},getDetail:function(a){var c=this,d=new ng.core.EventEmitter;return this._eventManager.emit("HTTP_BEGIN"),this._init().subscribe(function(){var e=b.getServiceUrl("detail")+"?name="+a;c._http.get(e).subscribe(function(a){c._eventManager.emit("HTTP_END"),d.emit(a.json().data)})}),d},search:function(a,c){var d=this,e=new ng.core.EventEmitter;return this._eventManager.emit("HTTP_BEGIN"),this._init().subscribe(function(){var f={};f[a]=c;var g=b.getServiceUrl("search")+"?params="+JSON.stringify(f);d._http.get(g).subscribe(function(a){d._eventManager.emit("HTTP_END"),e.emit(a.json().data)})}),e},getYears:function(){var a=this,c=new ng.core.EventEmitter;return this._eventManager.emit("HTTP_BEGIN"),this._init().subscribe(function(){var d=b.getServiceUrl("years");a._http.get(d).subscribe(function(b){a._eventManager.emit("HTTP_END"),c.emit(b.json().data)})}),c},getSeries:function(){var a=this,c=new ng.core.EventEmitter;return this._eventManager.emit("HTTP_BEGIN"),this._init().subscribe(function(){var d=b.getServiceUrl("series");a._http.get(d).subscribe(function(b){a._eventManager.emit("HTTP_END"),c.emit(b.json().data)})}),c},getCategories:function(){var a=this,c=new ng.core.EventEmitter;return this._eventManager.emit("HTTP_BEGIN"),this._init().subscribe(function(){var d=b.getServiceUrl("categories");a._http.get(d).subscribe(function(b){a._eventManager.emit("HTTP_END"),c.emit(b.json().data)})}),c},getManufacturers:function(){var a=this,c=new ng.core.EventEmitter;return this._eventManager.emit("HTTP_BEGIN"),this._init().subscribe(function(){var d=b.getServiceUrl("manufacturers");a._http.get(d).subscribe(function(b){a._eventManager.emit("HTTP_END"),c.emit(b.json().data)})}),c},_init:function(){var a=this,c=new ng.core.EventEmitter;return this._initialized?setTimeout(function(){c.emit()},0):this._http.get(b.getServiceUrl("init")).subscribe(function(){c.emit(),a._initialized=!0}),c}})});